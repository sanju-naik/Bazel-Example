load("@build_bazel_rules_ios//rules:framework.bzl", "apple_framework")

apple_framework(
    name = "GoogleDataTransport",
    srcs = glob([
        "GoogleDataTransport/GDTCORLibrary/**/*.h",
        "GoogleDataTransport/GDTCORLibrary/**/*.m",
        "GoogleDataTransport/GDTCCTLibrary/**/*.h",
        "GoogleDataTransport/GDTCCTLibrary/**/*.m",
        "GoogleDataTransport/GDTCCTLibrary/**/*.c",
    ]),
    objc_copts = ["-IPods/GoogleDataTransport/"],
    platforms = {"ios": "9.0"},
    public_headers = [
        "GoogleDataTransport/GDTCORLibrary/Public/GoogleDataTransport/GDTCORClock.h",
        "GoogleDataTransport/GDTCORLibrary/Public/GoogleDataTransport/GDTCORConsoleLogger.h",
        "GoogleDataTransport/GDTCORLibrary/Public/GoogleDataTransport/GDTCOREndpoints.h",
        "GoogleDataTransport/GDTCORLibrary/Public/GoogleDataTransport/GDTCOREvent.h",
        "GoogleDataTransport/GDTCORLibrary/Public/GoogleDataTransport/GDTCOREventDataObject.h",
        "GoogleDataTransport/GDTCORLibrary/Public/GoogleDataTransport/GDTCOREventTransformer.h",
        "GoogleDataTransport/GDTCORLibrary/Public/GoogleDataTransport/GDTCORTargets.h",
        "GoogleDataTransport/GDTCORLibrary/Public/GoogleDataTransport/GDTCORTransport.h",
        "GoogleDataTransport/GDTCORLibrary/Public/GoogleDataTransport/GoogleDataTransport.h",
    ],
    sdk_dylibs = ["z"],
    sdk_frameworks = [
        "CoreTelephony",
        "SystemConfiguration",
    ],
    swift_copts = [
        "-Xcc",
        "-IPods/GoogleDataTransport/",
    ],
    visibility = ["//visibility:public"],
    xcconfig = {
        "GCC_C_LANGUAGE_STANDARD": "c99",
        "CLANG_UNDEFINED_BEHAVIOR_SANITIZER_NULLABILITY": "YES",
        "GCC_PREPROCESSOR_DEFINITIONS": [
            "PB_FIELD_32BIT=1",
            "PB_NO_PACKED_STRUCTS=1",
            "PB_ENABLE_MALLOC=1GDTCOR_VERSION=9.2.3",
        ],
    },
    deps = [
        "//Pods/GoogleUtilities",
        "//Pods/PromisesObjC",
        "//Pods/nanopb",
    ],
)
